<!DOCTYPE html>
<html lang="en">

<head>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.11.11/lib/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.11.11/addons/p5.sound.min.js"></script>

    <script>// =================================================================
      // p5.js 創作：The Brutalist Archive (精緻線條版)
      // 修改重點：大幅降低線條粗細 (strokeWeight)，減少線條抖動幅度，創造細緻感
      // =================================================================
      
      let palette;
      let cols = [];
      
      function setup() {
        createCanvas(900, 1200);
        noLoop();
        noCursor();
      
        // --- 色票定義 ---
        palette = {
          concreteBg: color(220, 225, 230),
          woodDark: color(130, 90, 60),
          woodLight: color(180, 140, 100),
          // 【修改】稍微加深線條顏色，確保細線清晰
          structureLine: color(60), 
          leafDark: color(40, 70, 60),
          leafLight: color(80, 120, 100),
          warmLightSource: color(255, 200, 100),
          glazeFlow: color(245, 240, 235, 220)
        };
      
        cols = [width * 0.2, width * 0.5, width * 0.8];
      }
      
      function draw() {
        background(palette.concreteBg);
        drawBrightNoiseLayer();
      
        // 【核心修改】繪製更細緻的結構
        drawStructureDelicate();
      
        drawArchiveDataOptimized();
        drawOrganicOvergrowthOptimized();
        drawTransparentLightOverlay();
        
        // 【核心修改】繪製更細緻的邊框
        drawDelicateFrame();
      }
      
      // === 優化後的繪圖組件 ===
      
      function drawBrightNoiseLayer() {
        noStroke();
        for(let i=0; i<3000; i++){
          fill(random(200, 255), 50);
          rect(random(width), random(height), random(1,3), random(1,3));
        }
      }
      
      // 【核心修改】細緻化結構繪製函數
      function drawStructureDelicate() {
        for (let x of cols) {
          let colWidth = random(80, 120);
          noStroke();
          fill(palette.woodDark);
          rect(x - colWidth/2, 0, colWidth, height);
          fill(palette.woodLight);
          rect(x - colWidth/2 + 10, 0, colWidth-20, height);
          
          stroke(palette.structureLine); 
          noFill();
          
          // 【修改1】柱子邊緣線變細 (1.2)，抖動變小 (0.8)
          strokeWeight(1.2); 
          let wiggle = 0.8;
          line(x - colWidth/2 + random(-wiggle,wiggle), 0, x - colWidth/2 + random(-wiggle,wiggle), height);
          line(x + colWidth/2 + random(-wiggle,wiggle), 0, x + colWidth/2 + random(-wiggle,wiggle), height);
        }
      
        // 【修改2】層架線條變得非常細 (0.8)，抖動極小 (0.5)
        stroke(palette.structureLine); 
        strokeWeight(0.8);
        let shelfWiggle = 0.5;
        for (let y = height * 0.2; y < height * 0.9; y += 150) {
          line(0, y + random(-shelfWiggle,shelfWiggle), width, y + random(-shelfWiggle,shelfWiggle));
          line(0, y+8 + random(-shelfWiggle,shelfWiggle), width, y+8 + random(-shelfWiggle,shelfWiggle));
        }
      }
      
      function drawArchiveDataOptimized() {
        noStroke();
        let shelfPositions = [];
        for (let y = height * 0.2; y < height * 0.9; y += 150) {
            shelfPositions.push(y);
        }
        
        for (let y of shelfPositions) {
          for (let x = 20; x < width - 20; x += 25) {
            let onColumn = false;
            for(let colX of cols) if(abs(x - colX) < 50) onColumn = true;
            if(onColumn) continue;
      
            let r = noise(x*0.01, y*0.01) * 200 + 55;
            let g = noise(x*0.01 + 100, y*0.01) * 200 + 55;
            let b = noise(x*0.01 + 200, y*0.01) * 200 + 55;
            
            let h = random(15, 35);
            fill(r, g, b, 220);
            if(random() > 0.2) { 
              rect(x, y - h, 15, h);
            }
          }
        }
      }
      
      function drawOrganicOvergrowthOptimized() {
        noStroke();
        for (let i = 0; i < 250; i++) {
          let pickCol = random(cols);
          let x = pickCol + random(-120, 120);
          let y = random(height);
          
          push();
          translate(x, y);
          rotate(random(TWO_PI));
          let leafCol = lerpColor(palette.leafDark, palette.leafLight, random(1));
          if(dist(x,y, width*0.85, height*0.25) < 350) {
               leafCol = lerpColor(leafCol, color(255,255,150), 0.5);
          }
          fill(leafCol);
          let size = random(30, 80);
          ellipse(0, 0, size, size * random(0.6, 0.9));
          pop();
        }
      
        fill(palette.glazeFlow);
        beginShape();
        vertex(0, height);
        for(let x = 0; x <= width; x+=30){ 
            let y = height - 50 - noise(x*0.02)*100;
            for(let colX of cols) if(abs(x - colX) < 60) y -= 40;
            curveVertex(x, y);
        }
        vertex(width, height);
        endShape(CLOSE);
      }
      
      function drawTransparentLightOverlay() {
        let lightX = width * 0.85;
        let lightY = height * 0.25;
        let maxDist = width * 1.3;
      
        let ctx = drawingContext;
        let gradient = ctx.createRadialGradient(lightX, lightY, 0, lightX, lightY, maxDist);
        
        gradient.addColorStop(0, 'rgba(255, 255, 220, 0)'); 
        gradient.addColorStop(0.4, 'rgba(200, 180, 150, 0.2)');
        gradient.addColorStop(1, 'rgba(40, 50, 60, 0.6)');
        
        ctx.fillStyle = gradient;
        rect(0, 0, width, height);
      
        noStroke();
        for(let i=0; i<8; i++){
            fill(255, 220, 150, 50 - i*5);
            ellipse(lightX, lightY, i*40, i*40);
        }
      }
      
      // 【核心修改】細緻化邊框
      function drawDelicateFrame(){
          noFill();
          stroke(palette.structureLine);
          // 【修改3】邊框變細
          strokeWeight(2); 
          rect(0,0,width,height);
      }
      
      function mousePressed() {
        redraw();
      }</script>

    <link rel="stylesheet" type="text/css" href="style.css">
    <meta charset="utf-8" />

</head>

<body>
    <main>
    </main>
</body>

</html>